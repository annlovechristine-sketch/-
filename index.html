<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é¦™å±±æ•…äº‹é¤¨</title>
<style>
  body { font-family: å¾®è»Ÿæ­£é»‘é«”; color: #373535; margin:0; padding:0; background: url('bg.jpg') no-repeat center top;
  background-size: cover; display:flex; flex-direction: column; justify-content:center; align-items:center; height:100vh; }
  .player { width:95%; max-width:400px; background:#fff; padding:15px; border-radius:25px; box-shadow:0 10px 25px rgba(0,0,0,0.2); text-align:center; margin-bottom: 30px; }
.player img {
  width: 100%;
  border-radius: 20px;
  margin-bottom: 15px;
}

/* æ¨™é¡Œèˆ‡èªªæ˜æ–‡å­— */
.player h2 {
  font-size: 1.3rem;
  font-weight: bold;
  color: #f0f0f0;
  margin-bottom: 10px;
}

.player p {
  font-size: 1rem;
  line-height: 1.8;
  color: #1a2735;
  text-align: justify;
}

/* æ’­æ”¾å™¨æ§åˆ¶åˆ— */
audio {
  width: 100%;
  margin-top: 15px;
  margin-bottom: 15px;
}

/* æŒ‰éˆ• */
.controls {
  display: flex;
  justify-content: center;
  gap: 15px;
}

.controls button {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  font-size: 24px;
  color: white;
  cursor: pointer;
  transition: transform 0.2s;
}

.controls button:hover {
  transform: scale(1.1);
}

.controls .backward,
.controls .forward {
  background: #25a5a5;
}

.controls .play {
  background: #f85b5b;
}

/* ğŸ”¹ æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
@media screen and (max-width: 768px) {
  body {
    justify-content: flex-start; /* å¾ä¸Šæ–¹é–‹å§‹ */
    align-items: center;         /* æ°´å¹³ä»ç½®ä¸­ */
    padding-top: 20px;
  }

  .player {
    width: 90%;
    margin-bottom: 20px;
  }

  .player h2 {
    font-size: 1.2rem;
  }

  .player p {
    font-size: 0.95rem;
  }

  .controls button {
    width: 55px;
    height: 55px;
    font-size: 22px;
  }
}
  .cover { width:100%; height:220px; border-radius:20px; object-fit:cover; margin-bottom:15px; }
  .title { font-size:18px; font-weight:bold; margin-bottom:10px;font-family: Gungsuh, serif;color:#373535; }
  .description { font-size:14px; color:#0d2447; line-height:1.5; text-align:justify; margin-bottom:15px; }
  .description span { transition: color 0.3s; }
  .description span.active { color:#fc5658; }
  .progress-container { width:100%; height:8px; background:#eee; border-radius:5px; margin:15px 0; cursor:pointer; position:relative; }
  .progress { height:100%; width:0; background:#373535; border-radius:5px; }
  .controls { display:flex; justify-content:center; align-items:center; gap:20px; margin-top:10px; }
  .btn { width:50px; height:50px; border:none; background:none; padding:0; cursor:pointer; }
  .btn img { width:100%; height:100%; object-fit:contain; }
  .time { display:flex; justify-content:space-between; align-items:center; font-size:12px; color:#0d2447; margin-top:5px; }
  .playlist { margin-top:15px; text-align:left; max-height:200px; overflow-y:auto; border-top:1px solid #eee; padding-top:10px; } 
  .playlist-item { display: grid; grid-template-columns: 70px auto; padding: 8px 12px; margin: 5px 0; border-radius: 10px; cursor: pointer; transition: background 0.3s; } 
  .playlist-item:hover { background:#e4dc99; }
  .playlist-label { text-align: right; padding-right: 8px; font-weight: bold; }
  .speed-control { font-size:12px; padding:2px 6px; border-radius:5px; border:1px solid #ccc; }
</style>
</head>
<body>
<div class="player">
  <img id="cover" class="cover" src="cover1.jpg" alt="å°é¢åœ–ç‰‡">
  <div class="title" id="title">é¦™å±±æ•…äº‹é¤¨</div>
  <div class="description" id="description"></div>
  <audio id="audio"></audio>

  <div class="progress-container" id="progress-container">
    <div class="progress" id="progress"></div>
  </div>

  <div class="time">
    <span id="current-time">0:00</span>
    <div style="display:flex; align-items:center; gap:5px;">
      <span id="duration">0:00</span>
      <select id="speed" class="speed-control">
        <option value="0.75">0.75x</option>
        <option value="1" selected>1x</option>
        <option value="1.25">1.25x</option>
        <option value="1.5">1.5x</option>
      </select>
    </div>
  </div>

  <!-- æ§åˆ¶éµ (æ”¹æˆåœ–ç‰‡) -->
  <div class="controls">
    <button class="btn" id="prev"><img src="prev.png" alt="ä¸Šä¸€é¦–"></button>
    <button class="btn" id="play"><img src="play.png" alt="æ’­æ”¾"></button>
    <button class="btn" id="next"><img src="next.png" alt="ä¸‹ä¸€é¦–"></button>
  </div>

  <div class="playlist" id="playlist"></div>
</div>

<script>
const audio = document.getElementById('audio');
const playBtn = document.getElementById('play');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const progress = document.getElementById('progress');
const progressContainer = document.getElementById('progress-container');
const currentTimeEl = document.getElementById('current-time');
const durationEl = document.getElementById('duration');
const titleEl = document.getElementById('title');
const playlistEl = document.getElementById('playlist');
const coverEl = document.getElementById('cover');
const descriptionEl = document.getElementById('description');
const speedEl = document.getElementById('speed');

const tracks = [
  {
    title: "å°è¦½ 01 - å¤œé·º",
    src: "å¤œé·º.mp3",
    cover: "01å¤œé·º.jpg",
    descriptionText: "ä¸€ã€å¤œé·ºï¼Œé›Œé›„é³¥åŒå‹ï¼Œé ­é ¸è¼ƒçŸ­ï¼Œå–™ç²—å£¯ç•¥å‘ä¸‹å½ã€‚æ•éƒ¨æœ‰çª„ç¾½å½¢æˆç¾½å† ï¼Œç¿¼åœ“ï¼Œè·—è¹ å‰ç·£å…·ç›¾é±—ï¼Œå¾Œç·£å…·ç¶²é±—ï¼Œå°¾çŸ­ï¼Œå°¾ç¾½12æšã€‚ç”Ÿæ´»åœ¨æµ·æ‹”1,500å…¬å°ºä»¥ä¸‹çš„æ²³æµã€æ²¼æ¾¤ã€æ± å¡˜ã€æ²³å£é™„è¿‘ã€‚æ¨¹æ£²æ€§ï¼Œç‰¹åˆ¥å–œæ­¡æ£²æ¯åœ¨ç´…æ¨¹æ—ã€ç«¹æ—åŠæœ¨éº»é»ƒé˜²é¢¨æ—é–“ã€‚è¡Œæ™‚ç¿¼å¯¬é•·ï¼Œèº«é«”çš„å½¢ç‹€å¥½åƒè¢«å£“ç¸®éï¼Œæ¯”å…¶å®ƒé·ºé¡æŒ¯ç¿…çš„é »åº¦é«˜ï¼Œæœƒåœ¨é£›è¡Œæ™‚é³´å«ã€‚",
    duration: 35
  },
  {
    title: "å°è¦½ 02 - ç¿ é³¥",
    src: "ç¿ é³¥.mp3",
    cover: "02ç¿ é³¥.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
  },
  {
    title: "å°è¦½ 03 - éº»é›€",
    src: "éº»é›€.mp3",
    cover: "03éº»é›€.jpg",
    descriptionText: "éº»é›€æ˜¯å¸¸è¦‹çš„å°å‹é³¥é¡ï¼Œç¾¤å±…æ€§å¼·ï¼Œå–œæ­¡åœ¨è¾²ç”°å’Œä½å®¶é™„è¿‘æ´»å‹•ã€‚",
    duration: 12
 },
  {
    title: "å°è¦½ 04 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
  },
 {
    title: "å°è¦½ 05 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
},
{
    title: "å°è¦½ 06 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
},
{
    title: "å°è¦½ 07 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
},
{
    title: "å°è¦½ 08 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
},
{
    title: "å°è¦½ 09 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
},
{
    title: "å°è¦½ 10 - é£Ÿè›‡é¾œ",
    src: "é£Ÿè›‡é¾œ.mp3",
    cover: "04é£Ÿè›‡é¾œ.jpg",
    descriptionText: "äºŒã€ç¿ é³¥ï¼Œé›Œé›„é³¥é«”è‰²ç›¸ä¼¼ï¼Œå–™å¤§è€Œå°–ï¼Œé«”å‹ç²—çŸ­ï¼Œå°¾çŸ­ã€‚é ­ä¸Šç‚ºæš—ç¶ è‰²ï¼Œæœ‰é®®ç¶ è‰²æ©«ç´‹åŠè—æ–‘é»ï¼Œè€³ç¾½ç™½è‰²ï¼Œè…®ã€å–‰ç™½è‰²ï¼ŒèƒŒé¢å¯¶çŸ³è—è‰²ã€‚è…¹é¢æ©™é»ƒè‰²ã€‚æ™®éç”Ÿæ´»æ–¼æµ·æ‹”1,200å…¬å°ºä»¥ä¸‹çš„æºªæ¾—ã€æ²³å·ã€æ± å¡˜ã€çŒæº‰æ¸ é“çš„å²¸é‚Šï¼Œä¹Ÿæœƒå‡ºç¾åœ¨æµ·é‚Šã€æ²³å£åŠç´…æ¨¹æ—é–“ã€‚éœ€è¦æ¸…æ¾ˆåŠæµå’Œç·©çš„æ°´åŸŸã€‚å¸¸è²¼è¿‘æ°´é¢åšç›´ç·šé£›è¡Œï¼Œé£›è¡Œå¿«é€Ÿï¼Œé›™ç¿¼ä¸æ–·å¿«é€Ÿæ‹å‹•ã€‚",
    duration: 34
  }
];

let trackIndex = 0;

// æè¿°é€å¥åˆ†å‰²
function renderDescription(track){
  descriptionEl.innerHTML="";
  const sentences = track.descriptionText.split(/(?<=[ã€‚ï¼ï¼Ÿ])/);
  const sentenceDuration = track.duration / sentences.length;
  sentences.forEach((sentence,i)=>{
    const span=document.createElement("span");
    span.textContent=sentence;
    span.dataset.start=(i*sentenceDuration).toFixed(2);
    descriptionEl.appendChild(span);
  });
}

function loadTrack(index){
  const track=tracks[index];
  audio.src=track.src;
  titleEl.textContent=track.title;
  coverEl.src=track.cover;
  renderDescription(track);
  audio.load();
}

function renderPlaylist(){
  playlistEl.innerHTML="";
  tracks.forEach((track,i)=>{
    const div=document.createElement("div");
    div.classList.add("playlist-item");
    // å·¦é‚Šã€Œå°è¦½ 01ã€
    const label=document.createElement("div");
    label.classList.add("playlist-label");
    label.textContent =" å°è¦½ " + (i+1).toString().padStart(2,'0');

    // å³é‚Šæ¨™é¡Œã€Œå¤œé·ºã€
    const title=document.createElement("div");
    title.textContent = track.title.replace(/^å°è¦½\s*\d+\s*[-â€“]?\s*/, "â€“ ");

    div.appendChild(label);
    div.appendChild(title);

    div.addEventListener("click",()=>{
      trackIndex=i;
      loadTrack(trackIndex);
      audio.play();
      updatePlayButton(true);
    });

    playlistEl.appendChild(div);
  });
}

// æ›´æ–°æ’­æ”¾éµåœ–ç¤º
function updatePlayButton(isPlaying){
  const img = playBtn.querySelector("img");
  if(isPlaying){
    img.src="pause.png";
    img.alt="æš«åœ";
  } else {
    img.src="play.png";
    img.alt="æ’­æ”¾";
  }
}

// æ’­æ”¾æ§åˆ¶
playBtn.addEventListener("click",()=>{
  if(audio.paused){ audio.play(); updatePlayButton(true); }
  else { audio.pause(); updatePlayButton(false); }
});
prevBtn.addEventListener("click",()=>{
  trackIndex=(trackIndex-1+tracks.length)%tracks.length;
  loadTrack(trackIndex);
  audio.play();
  updatePlayButton(true);
});
nextBtn.addEventListener("click",()=>{
  trackIndex=(trackIndex+1)%tracks.length;
  loadTrack(trackIndex);
  audio.play();
  updatePlayButton(true);
});

// æ’­æ”¾é€Ÿåº¦æ§åˆ¶
speedEl.addEventListener("change",()=>{ audio.playbackRate=parseFloat(speedEl.value); });

// é€²åº¦èˆ‡é€å¥é«˜äº®
audio.addEventListener("timeupdate",()=>{
  const progressPercent=(audio.currentTime/audio.duration)*100;
  progress.style.width=`${progressPercent}%`;
  updateTime();

  const spans = descriptionEl.querySelectorAll("span");
  spans.forEach((span,i)=>{
    const start=parseFloat(span.dataset.start);
    const nextStart=(spans[i+1])?parseFloat(spans[i+1].dataset.start):Infinity;
    span.classList.toggle("active", audio.currentTime>=start && audio.currentTime<nextStart);
  });
});

// æ»‘é¼  & æ‰‹æŒ‡æ‹–æ›³æ§åˆ¶
function getX(e){ return e.touches?e.touches[0].clientX:e.clientX; }
function updateProgress(e){
  const rect=progressContainer.getBoundingClientRect();
  const x=getX(e)-rect.left;
  const percent=Math.min(Math.max(x/rect.width,0),1);
  audio.currentTime=percent*audio.duration;
  progress.style.width=`${percent*100}%`;
}
let isDragging=false;
progressContainer.addEventListener('mousedown',e=>{isDragging=true; updateProgress(e);});
progressContainer.addEventListener('touchstart',e=>{isDragging=true; updateProgress(e);});
progressContainer.addEventListener('mousemove',e=>{if(isDragging) updateProgress(e);});
progressContainer.addEventListener('touchmove',e=>{if(isDragging) updateProgress(e);});
progressContainer.addEventListener('mouseup',e=>{if(isDragging){updateProgress(e);isDragging=false;}});
progressContainer.addEventListener('touchend',()=>isDragging=false);

function updateTime(){
  currentTimeEl.textContent=formatTime(audio.currentTime);
  durationEl.textContent=formatTime(audio.duration);
}
function formatTime(time){
  if(isNaN(time)) return "0:00";
  const minutes=Math.floor(time/60);
  const seconds=Math.floor(time%60).toString().padStart(2,'0');
  return `${minutes}:${seconds}`;
}

audio.addEventListener('loadedmetadata',updateTime);
audio.addEventListener('ended',()=>{
  trackIndex=(trackIndex+1)%tracks.length;
  loadTrack(trackIndex);
  audio.play();
  updatePlayButton(true);
});

loadTrack(trackIndex);
renderPlaylist();
</script>
</body>
</html>
